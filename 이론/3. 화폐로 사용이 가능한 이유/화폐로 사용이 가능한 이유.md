# 소유자를 특정하는 열쇠와 자물쇠

A씨가 갖고 있는 비트코인을 다름 사람에게 이전하는 과정은 A씨가 자신의 '열쇠'로 '자물쇠'를 열어서 새로운 소유자의 열쇠로만 열 수 있는 자물쇠를 거는 과정이라 생각하면 된다. 분산장부에도 소유권 이동이 기재된다.

1. 열쇠
   - 타원곡선 암호로 생성한 비밀키
2. 자물쇠
   - 타원곡선 암호로 생성한 공개키

비밀키는 참여자마다 무작위 숫자로 만들어지는데, 대개는 이를 위한 전용 소프트웨어를 이용하여 자동으로 생성한다. 이 비밀키가 비트코인의 소유권을 증명하는 유일한 수단이므로 절대로 다른 사람에게 알려주거나 잃어버려서는 안 된다.  
이 키를 잃어버렸다면 비트코인을 영원히 사용할 수 없게 된다. 또, 비밀키가 새어나가 나쁜 마음을 먹은 제삼자가 소유권을 옮긴 경우에도 마찬가지이다.

# 송금 대상은 '어드레스'

예를 들어, A씨가 B씨에게 비트코인을 송금하려 한다고 하자. **_이때 송금 대상이 되는 것이 '어드레스'이다._**  
어드레스는 일반적으로 공개키의 해시값으로 만든다.(일반적이라는 것은 항상 그런 것은 아니기 때문이다.)

어드레스 생성 과정

1. SHA-256으로 공개키의 해시값을 만든다.
2. 1에서 얻은 해시값에 대해 다시 RIPEMD-160으로 해시값을 만든다.
3. 2에서 얻은 해시값을 Base58Check로 인코딩 한다.

**_2에서 얻은 해시값을 '공개키 해시'라고 한다._**

### 1. 어드레스를 생성하는 과정

1. 공개키의 해시값 앞에 Version Prefix를 붙인다.
2. 'Version Prefix + 공개키 해시값'을 SHA-256으로 해시값을 계산한다.
3. 2에서 만든 해시값에 다시 SHA-256으로 해시값을 계산한다.
4. 3에서 만든 해시값 중 맨 처음 4바이트를 Checksum으로 'Version Prefix + 공개키 해시값' 뒤에 붙여준다.
5. 'Version Prefix + 공개키 해시값 + Checksum'을 Base58로 인코딩한다.

### 2. Version Prefix

Version Prefix는 Base58Check로 인코딩하는 데이터의 종류를 특정하는 접두사를 말하는데, 공개키 해시에는 16진수로 '00'을 부여하는 규칙이 있다.

# 키를 관리하는 '전자 지갑'

**_전자 지갑은 좁은 의미로 비밀키를 관리하는 것이다._** 그러나 넓은 의미로는 송금, 잔액 확인, 키와 어드레스 관리 등의 기능을 제공하는 애플리케이션을 의미하기도 한다. 전자 지갑이라는 단어에서 지갑을 떠올리기 쉽지만, 실제 지갑처럼 전자 지갑 안에 비트코인이 저장되는 것은 아니다.

**_비트코인은 분산장부에 소유권이 기재되는 형태로 보관된다._**
